jQuery(function(c){function b(){c(".form-valid-sub input.defaultlabels").each(function(e){if(a(c(this).val())==c(this).attr("defaultValue")){c(this).val("")}});if(c(this).validationEngine("validate")){wysijaAJAX.task="save";wysijaAJAX.controller="subscribers";var d=c(this).serializeArray();c.each(d,function(e,f){wysijaAJAX["data["+e+"][name]"]=f.name;wysijaAJAX["data["+e+"][value]"]=f.value});wysijaAJAX.formid=c(this).attr("id");jQuery.WYSIJA_SEND()}else{c(".form-valid-sub input.defaultlabels").each(function(e){if(c(this).val()==""){c(this).val(c(this).attr("defaultValue"))}})}return false}c(document).ready(function(){c(".form-valid-sub").validationEngine("attach",{promptPosition:"centerRight",scroll:false,validationEventTrigger:"submit"});c(".form-valid-sub").submit(b);c("input.wysija-email").blur(function(){c(this).val(a(c(this).val()))});c(".form-valid-sub input.defaultlabels").each(function(d){var e=c(this).val();c(this).attr("defaultValue",e);c(this).blur(function(){if(a(c(this).val())==""){c(this).val(e)}else{c(this).val(a(c(this).val()))}});c(this).focus(function(){if(a(c(this).val())==e){c(this).val("")}})})});function a(d){return d.replace(/^\s+/g,"").replace(/\s+$/g,"")}jQuery.WYSIJA_SEND=function(){c("#msg-"+wysijaAJAX.formid).html('<div class="allmsgs"><blink>'+wysijaAJAX.loadingTrans+"</blink></div>");c("#"+wysijaAJAX.formid).fadeOut();wysijaAJAX._wpnonce=c("#wysijax").val();c.ajax({type:"POST",url:wysijaAJAX.ajaxurl,data:wysijaAJAX,success:function(d){c("#msg-"+wysijaAJAX.formid).html('<div class="allmsgs"></div>');if(d.result){c("#msg-"+wysijaAJAX.formid+" .allmsgs").html('<div class="updated">'+c("#"+wysijaAJAX.formid+' input[name="message_success"]').val()+"</div>")}else{c("#"+wysijaAJAX.formid).fadeIn();c.each(d.msgs,function(f,e){if(!c("#msg-"+wysijaAJAX.formid+" .allmsgs ."+f+" ul").length){c("#msg-"+wysijaAJAX.formid+" .allmsgs").append('<div class="'+f+'"><ul></ul></div>')}c.each(e,function(g,h){c("#msg-"+wysijaAJAX.formid+" .allmsgs ."+f+" ul").append("<li>"+h+"</li>")})})}},error:function(d,f,e){c("#msg-"+wysijaAJAX.formid).html('<div class="allmsgs"></div>');c("#msg-"+wysijaAJAX.formid+" .allmsgs").html('<div class="error"><ul><li>textStatus:'+f+"</li><li>errorThrown:"+e+"</li><li>responseText:"+d.responseText+"</li></ul></div>")},dataType:"json"})};jQuery(".showerrors").live("click",function(){jQuery(".xdetailed-errors").toggle()});jQuery(".shownotices").live("click",function(){jQuery(".xdetailed-updated").toggle()})});